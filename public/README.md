# Player 0 Frontend

Static web UI (vanilla HTML/CSS/JS). The backend serves this folder by default.

## Running locally

You normally don’t run the frontend separately.

Start the backend and open the printed URL:

```bash
bun run --cwd backend start
```

## API base URL

Default (same origin):

- `${window.location.origin}/api`

If hosting the frontend separately from the backend, set `window.__PLAYER0_API_URL` before modules load:

```html
<script>
	window.__PLAYER0_API_URL = 'https://your-api-host.example.com/api';
</script>
<script type="module" src="/app.js"></script>
```

More details: [backend/API_CONFIG.md](../backend/API_CONFIG.md)

## Code layout

- `app.js`: app entry
- `js/api.js`: API client
- `js/player.js`: audio playback
- `js/state.js`: shared state
- `js/ui.js`: rendering helpers
- `js/components/song-row.js`: shared “song row” renderer used across views
- `js/app/*`: feature modules (routing, playlists, search, settings, etc.)
- `views/*`: HTML templates loaded dynamically

## Service worker (offline)

- `sw.js` caches static assets (cache-first) and some API responses (network-first).
- Audio streams are network-only.
- In dev environments the SW disables caching automatically.

When shipping changes, update the cache version in `sw.js` (`CACHE_VERSION`). For v1 public release it is `v1`.

## Production build

The production build is generated by the backend build script:

```bash
bun run --cwd backend build
```

This writes `dist/` at the repo root (minified CSS, `index.html` pointing at `app.min.js`, and `sw.js`).
